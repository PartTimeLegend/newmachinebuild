name: Docker Image CI

on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]

jobs:

  build:

    runs-on: windows-latest

    steps:
    - uses: actions/checkout@v2
    - name: Build the Docker image
      run: docker build . --file Dockerfile --tag parttimelegend/newmachinebuild:$(date +%s)
    - name: Docker image list
      run: docker images

    # Linux Only maybe one day the world will accept Windows containers
    #- name: Push to GitHub Packages
    #  uses: docker/build-push-action@v2
    #  with:
    #    username: ${{ github.actor }}
    #    password: ${{ secrets.GITHUB_TOKEN }}
    #    registry: docker.pkg.github.com
    #    repository: parttimelegend/newmachinebuild/workstation
    #    tag_with_ref: true
